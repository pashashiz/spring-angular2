/*! secured-app - v1.0.0 - 2015-06-28 */angular.module("securedApp",["ngRoute","securityServices"]).config(function(a,b){a.when("/",{templateUrl:"view/home.html",controller:"HomeCtrl"}).when("/login",{templateUrl:"view/login.html",controller:"LoginCtrl"}).otherwise("/"),b.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}),angular.module("securedApp").controller("HomeCtrl",["$location","$rootScope","$scope","AuthService",function(a,b,c,d){b.location="home",b.authenticated&&b.principal||d.getUser().success(function(c){b.principal=c,b.authenticated=!0,a.path("/")}).error(function(){b.authenticated=!1,a.path("/login")})}]),angular.module("securedApp").controller("LoginCtrl",["$location","$rootScope","$scope","AuthService",function(a,b,c,d){b.location="login",c.login=function(){d.login(c.credentials.username,c.credentials.password).success(function(d){b.principal=d,b.authenticated=!0,c.error=!1,a.path("/")}).error(function(){b.authenticated=!1,c.error=!0,a.path("/login")})}}]),angular.module("securedApp").controller("NavigationCtrl",["$location","$rootScope","$scope","AuthService",function(a,b,c,d){c.logout=function(){d.logout()["finally"](function(){b.authenticated=!1,a.path("/login")})}}]),angular.module("securityServices",[]).factory("AuthService",["$http",function(a){return{login:function(b,c){var d={Authorization:"Basic "+btoa(b+":"+c)};return a.get("user",{headers:d})},logout:function(){return a.get("logout")},getUser:function(){return a.get("user")}}}]);